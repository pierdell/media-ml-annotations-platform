# ═══════════════════════════════════════════════════════════
# Index Factory Platform - Environment Configuration
# Copy to .env and fill in values before running
# ═══════════════════════════════════════════════════════════

# ── General ────────────────────────────────────────────────
ENVIRONMENT=production
SECRET_KEY=change-me-to-a-random-64-char-string
ALLOWED_ORIGINS=http://localhost,http://localhost:80

# ── PostgreSQL ─────────────────────────────────────────────
POSTGRES_DB=indexfactory
POSTGRES_USER=indexfactory
POSTGRES_PASSWORD=change-me-postgres-password
POSTGRES_PORT=5432

# ── Redis ──────────────────────────────────────────────────
REDIS_PASSWORD=change-me-redis-password
REDIS_PORT=6379

# ── Qdrant ─────────────────────────────────────────────────
QDRANT_API_KEY=change-me-qdrant-api-key
QDRANT_HTTP_PORT=6333
QDRANT_GRPC_PORT=6334

# ── MinIO (S3-compatible object storage) ───────────────────
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=change-me-minio-password
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001

# ── API ────────────────────────────────────────────────────
API_PORT=8000
# JWT token expiry in minutes
ACCESS_TOKEN_EXPIRE_MINUTES=1440
# First admin user (created on first startup)
ADMIN_EMAIL=admin@indexfactory.local
ADMIN_PASSWORD=change-me-admin-password

# ── Worker ─────────────────────────────────────────────────
WORKER_REPLICAS=2
WORKER_CONCURRENCY=4

# ── ML Models ──────────────────────────────────────────────
# CLIP model for image embeddings
CLIP_MODEL_NAME=ViT-B/32
# DINOv2 model for visual features
DINO_MODEL_NAME=facebook/dinov2-base
# Vision-Language Model for captioning/indexing
VLM_MODEL_NAME=Salesforce/blip2-opt-2.7b
# Text embedding model for hybrid search
TEXT_EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2

# ── Nginx ──────────────────────────────────────────────────
HTTP_PORT=80

# ── Monitoring (optional) ──────────────────────────────────
FLOWER_PORT=5555

# ── Feature Flags ─────────────────────────────────────────
# Set to true for SaaS/remote deployment with billing
BILLING_ENABLED=false
# Enable rate limiting middleware
RATE_LIMITING_ENABLED=true

# ── Billing (only used when BILLING_ENABLED=true) ─────────
# Stripe API keys for payment processing
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=
# Default quotas for new projects
DEFAULT_STORAGE_QUOTA_GB=50
DEFAULT_COMPUTE_QUOTA_HOURS=100
DEFAULT_API_RATE_LIMIT=1000

# ── Observability ─────────────────────────────────────────
# Logging: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO
# Log format: 'json' for production, 'console' for development
LOG_FORMAT=json
# Enable Prometheus metrics endpoint
PROMETHEUS_ENABLED=false
